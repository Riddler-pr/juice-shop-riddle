name: ZAP-Test

on:
  push: 
    branches: [ Newbranch ]

jobs:
  zap_scan:
    runs-on: ubuntu-latest

    steps:
      # Step 1: Check out the code from the repository
      - name: Check out the code
        uses: actions/checkout@v2

      # Step 2: Start the target application if necessary
      # (Optional) This step depends on whether you need to deploy your application before scanning.
      # Example of starting a Docker container for the app:
      # - name: Start the application
      #   run: docker-compose up -d
      - name: List files in the current directory
        run: ls -R

      # Step 3: Run OWASP ZAP scan
      - name: Run OWASP ZAP Baseline Scan
        uses: zaproxy/action-api-scan@v0.8.0
        with:
          # Replace the URL with the URL of the app to be scanned
          target: "http://altoro.testfire.net/" 
          # Specify your ZAP scan options (default is a basic scan)
          cmd_options: "-t http://altoro.testfire.net/ -r /home/runner/work/juice-shop-riddle/juice-shop-riddle/report_html.html"

      

      # Step 4: Upload the ZAP scan report
      - name: Upload ZAP report
        uses: actions/upload-artifact@v4.4.3
        with:
          name: ZAP Report
          path: /home/runner/work/juice-shop-riddle/juice-shop-riddle/report_html.html


